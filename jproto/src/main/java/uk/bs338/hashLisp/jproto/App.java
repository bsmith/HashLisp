/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package uk.bs338.hashLisp.jproto;

public class App {
    public String getGreeting() {
        return "jproto --- prototype for HashLisp";
    }

    public static void main(String[] args) throws Exception {
        System.out.println(new App().getGreeting());

        System.out.printf("nil:             %s%n", LispValue.nil);
        System.out.printf("short int -17:   %s%n", LispValue.fromShortInt(-17));
        System.out.printf("object hash -19: %s%n", LispValue.fromObjectHash(-19));
        System.out.println();

        HonsCell cell = new HonsCell(LispValue.fromShortInt(5), LispValue.nil);
        System.out.printf("cell: %s%n", cell);
        System.out.printf("nil:  %s%n", HonsCell.nil);

        HonsHeap heap = new HonsHeap();
        LispValue val = heap.hons(LispValue.fromShortInt(5), LispValue.nil);
        System.out.println(val);
        System.out.println(heap.valueToString(val));

        System.out.println(heap.hons(LispValue.fromShortInt(5), LispValue.nil));
        System.out.println(heap.valueToString(heap.hons(
                LispValue.fromShortInt(LispValue.SHORTINT_MIN),
                LispValue.fromShortInt(LispValue.SHORTINT_MAX)
            )));

        LispValue list = LispValue.nil;
        int nums[] = {5, 4, 3, 2, 1};
        for (var num : nums) {
            list = heap.hons(LispValue.fromShortInt(num), list);
        }
        System.out.println(heap.valueToString(list));

        heap.dumpHeap();
    }
}
